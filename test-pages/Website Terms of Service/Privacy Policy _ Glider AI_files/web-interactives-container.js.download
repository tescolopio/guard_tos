!function(){"use strict";const e={RECEIVED_ANALYTICS:"HS_CTA_PARENT_RECEIVED_ANALYTICS",DEVICE_TYPE:"HS_CTA_PARENT_DEVICE_TYPE",PROXY_ANALYTICS_FN_CALLBACK:"HS_CTA_PARENT_PROXY_ANALYTICS_FN",INIT:"HS_CTA_PARENT_INIT",SHOWING_CTA:"HS_CTA_SHOWING_CTA",SEND_EXTRACTED_STYLES:"HS_SEND_EXTRACTED_STYLES",STARTED:"HS_CTA_STARTED",NAVIGATE_PAGE:"HS_CTA_NAVIGATE_PAGE",CLICK_EVENT:"HS_CTA_CLICK_EVENT",CLOSE_INTERACTIVE:"HS_CTA_CLOSE_INTERACTIVE",HAS_CLOSED:"HS_CTA_HAS_CLOSED",NEW_HEIGHT:"HS_CTA_NEW_HEIGHT",DISPLAY_CALL_TO_ACTION:"HS_DISPLAY_CALL_TO_ACTION",PROXY_ANALYTICS:"HS_CTA_PROXY_ANALYTICS",PROXY_ANALYTICS_FN:"HS_CTA_PROXY_ANALYTICS_FN",SEND_FORM_DEFINITION:"HS_SEND_FORM_DEFINITION",SEND_CTA_CONFIG:"HS_SEND_CTA_CONFIG",SEND_EMBED_CONTEXT:"HS_SEND_EMBED_CONTEXT",RECEIVE_FILTERED_STYLESHEETS:"RECEIVE_FILTERED_STYLESHEETS",SEND_STYLESHEETS:"SEND_STYLESHEETS",RENDER_RECAPTCHA:"RENDER_RECAPTCHA",EXECUTE_RECAPTCHA:"EXECUTE_RECAPTCHA",RESET_RECAPTCHA:"RESET_RECAPTCHA",RECAPTCHA_SUCCESS:"RECAPTCHA_SUCCESS",RECAPTCHA_EXPIRED:"RECAPTCHA_EXPIRED",TRIGGER_CTA:"HS_CTA_TRIGGER_CTA",CTA_FORM_SUBMITTED:"HS_CTA_FORM_SUBMITTED"};function t(...e){if(window.location.search.indexOf("hs_debug_interactive")>-1||window.location.host.includes("local.hsappstatic")){console.log("[web-interactives-embed]",...e);window.location.search.indexOf("hs_is_selenium")>-1&&console.log(...[...e].map((e=>JSON.stringify(e))))}}class i{constructor(){this.listeners=new Map}on(e,t){if(!this.listeners.has(e)){this.listeners.set(e,[t]);return}const i=this.listeners.get(e);this.listeners.set(e,[...i,t])}off(e){this.listeners.delete(e)}emit(e,t){const i=this.listeners.get(e);i&&i.length&&i.forEach((e=>e(t)))}reset(){this.listeners=new Map}}function s(){return new i}const n=(...e)=>{t("[GlobalIframeCommunication]",...e)};class r{constructor(){this.iframeCommunicators=new Map;this.eventEmitter=s();this.reset=()=>{this.eventEmitter.reset();this.iframeCommunicators=new Map}}registerHandler(e,t){this.eventEmitter.on(e,t)}registerHandlers(e){n("Registering handlers",e);Object.keys(e).forEach((t=>{const i=t,s=e[i];s&&this.registerHandler(i,s)}))}registerCommunicator(e,t){n("Registering communicator",t);const i=this.iframeCommunicators.get(t)||[];this.iframeCommunicators.set(t,[...i,e])}removeCommunicator(e){n("Removing Iframe Communicator from GlobalCommunication: ",e);this.iframeCommunicators.delete(e)}emit(e,t){n("Emitting event",{event:e,messagePayload:t});this.eventEmitter.emit(e,t)}broadcast(e,t){const i=this.iframeCommunicators.get(e);if(i){n("Broadcasting",i);i.forEach((e=>{e.sendMessage(t)}))}else n("Cannot find communcators array, not broadcasting",e,t)}broadcastAll(e){n("Broadcasting",e,"to all",this.iframeCommunicators);for(const[t,i]of this.iframeCommunicators)this.broadcast(t,e)}}new r;class o{constructor(e,t){this.listeners=new Set;this.batching=!1;this.queue=[];this.subscribe=e=>{this.listeners.add(e);let t=()=>{};this.options&&this.options.onSubscribe&&(t=this.options.onSubscribe(e,this));return()=>{this.listeners.delete(e);t()}};this.setState=e=>{const t=this.state;this.options&&this.options.updateFn?this.state=this.options.updateFn(t)(e):this.state=e(t);if(this.state!==t){this.queue.push((()=>{this.listeners.forEach((e=>e(this.state,t)));this.options&&this.options.onUpdate&&this.options.onUpdate(this.state,t)}));this._flush()}};this._flush=()=>{if(!this.batching){this.queue.forEach((e=>e()));this.queue=[]}};this.batch=e=>{this.batching=!0;e();this.batching=!1;this._flush()};this.state=e;this.options=t}}class a{constructor(){this.storage=[]}enqueue(e){this.storage.push(e)}dequeue(){return this.storage.shift()}peek(){return this.storage[0]}size(){return this.storage.length}}function l(){return new a}const c="addIdentityListener";class h{constructor({applicationController:t}){this.trackerCallbacks=l();this.identityListenerCallbacks=l();this.parentAnalytics=null;this.handleAnalyticsRecieved=e=>{this.parentAnalytics=e;this.flushQueues()};this.handlePushToHSQ=t=>{if("function"!=typeof t){Array.isArray(t)&&(t[0]===c&&"function"==typeof t[1]?this.identityListenerCallbacks.enqueue(t[1]):this.applicationController.sendMessage({type:e.PROXY_ANALYTICS,payload:{analytics:t}}));this.parentAnalytics&&this.flushQueues()}else this.trackerCallbacks.enqueue(t)};window._hsq=window._hsq||[];this.applicationController=t;this.registerAnalyticsHandler();this.proxyHsq()}registerAnalyticsHandler(){this.applicationController.registerHandler(e.RECEIVED_ANALYTICS,this.handleAnalyticsRecieved)}flushQueues(){if(this.parentAnalytics){do{const e=this.trackerCallbacks.dequeue();e&&e(this.tracker)}while(this.trackerCallbacks.peek());do{const e=this.identityListenerCallbacks.dequeue();e&&e(this.parentAnalytics.hstc,this.parentAnalytics.hssc,this.parentAnalytics.hsfp)}while(this.identityListenerCallbacks.peek())}}get tracker(){return this.parentAnalytics?{path:this.parentAnalytics.path,referrerPath:this.parentAnalytics.referrerPath,utk:{visitor:this.parentAnalytics.hutk,get:()=>this.parentAnalytics.hutk},pageId:this.parentAnalytics.pageId,_getFingerprint:()=>this.parentAnalytics.hsfp,canonicalUrl:this.parentAnalytics.canonicalUrl,contentType:this.parentAnalytics.contentType,session:{get:()=>this.parentAnalytics.hssc}}:null}proxyHsq(){window._hsq.push=this.handlePushToHSQ;window._hsq.forEach(this.handlePushToHSQ)}}function d(e){window.open(e,"_blank","noopener")}function p(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}const u="data-container-navigation-controller";function m(){return Array.from(document.getElementsByTagName("a"))}function g(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol||"tel:"===t.protocol||"mailto:"===t.protocol}class C{constructor({applicationController:e}){this.overrideAnchorTags=()=>{new MutationObserver((()=>{m().forEach((e=>{if(!e.hasAttribute(u)){e.setAttribute(u,"true");e.addEventListener("click",this.handleAnchorClick)}}))})).observe(document.body,{childList:!0,subtree:!0});m().forEach((e=>{e.setAttribute(u,"true");e.addEventListener("click",this.handleAnchorClick)}))};this.handleAnchorClick=e=>{e.preventDefault();if(!e.target)return;const t=e.currentTarget,i=g(t.href);this.applicationController.onLinkClick(t);if(!i)return;const s="_blank"===t.target||"blank"===t.target;this.navigatePage(t.href,s)};this.applicationController=e;p(this.overrideAnchorTags)}navigatePage(t,i=!1){i&&d(t);this.applicationController.sendMessage({type:e.NAVIGATE_PAGE,payload:{url:t,openNewTab:i}})}}function y(e){new ResizeObserver(e).observe(document.body)}class E{constructor({applicationController:t}){this.listenForResize=()=>{y((()=>this.handleResize()))};this.getNewHeight=()=>document.body.getBoundingClientRect().height;this.handleResize=()=>{this.applicationController.sendMessage({type:e.NEW_HEIGHT,payload:{height:this.getNewHeight()}})};this.applicationController=t;p(this.listenForResize)}}const S="web-interactives-external-style";class f{constructor({applicationController:e}){this.handleExtractedStyles=({extractedStyles:e})=>{let t="";for(const[i,s]of Object.entries(e.rules)){t+=`${i} { `;for(const[e,i]of Object.entries(s))t+=`${e}: ${i}; `;t+="} "}for(const[i,s]of Object.entries(e.keyframes)){t+=`@keyframes ${i} { `;for(const e of s){t+=`${e.keyText} { `;for(const[i,s]of Object.entries(e.style))t+=`${i}: ${s}; `;t+="} "}t+="} "}this.styleElement.innerHTML=t};this.applicationController=e;this.styleElement=document.getElementById(S)||document.createElement("style");this.styleElement.id=S;this.registerExternalStylesHandler();p((()=>{document.head.appendChild(this.styleElement)}))}registerExternalStylesHandler(){this.applicationController.registerHandler(e.SEND_EXTRACTED_STYLES,this.handleExtractedStyles)}}class A{constructor({ContainerResizeControllerClass:t=E}={}){this.queue=l();this.gates=[];this.gatesHydrated=!1;this.gatedCallbackQueue=[];this.eventEmitter=s();this.initPort=t=>{if(t.data.type===e.INIT){this.port=t.ports[0];this.port.onmessage=this.handleMessage;window.removeEventListener("message",this.initPort);this.flushQueue()}};this.handleMessage=e=>{const t=e.data;this.receivedMessage(t);this.eventEmitter.emit(t.type,t.payload)};this.handleIfUngated=(e,t)=>{const i=()=>{this.isUngatedFor(e)&&t()};this.gatesHydrated?i():this.gatedCallbackQueue.push(i)};this.isUngatedFor=e=>this.gates.includes(e);this.listenForPort();this.setRegisterHandlers();this.analyticsController=new h({applicationController:this});this.navigationController=new C({applicationController:this});this.resizeController=new t({applicationController:this});this.externalStylesController=new f({applicationController:this})}listenForPort(){window.addEventListener("message",this.initPort)}setGates(e=[]){this.gates=e;this.gatesHydrated=!0;this.gatedCallbackQueue.forEach((e=>e()))}sendMessage(e){this.port?this.port.postMessage(e):this.queue.enqueue(e)}fireContainerReady(){this.sendMessage({type:e.STARTED,payload:{}})}navigatePage(e){this.navigationController.navigatePage(e)}setRegisterHandlers(){const e=this.registerMessageHandlers();Object.keys(e).forEach((t=>{const i=t,s=e[i];s&&this.registerHandler(i,s)}))}flushQueue(){do{const e=this.queue.dequeue();e&&this.sendMessage(e)}while(this.queue.peek())}registerHandler(e,t){this.eventEmitter.on(e,t)}receivedMessage(e){}registerMessageHandlers(){return{}}onLinkClick(e){}}const _="hubspotutk",T="__hstc",b="__hssc",I=e=>{const t=document.cookie.match(`(^|[^;]+)\\s*${e}\\s*=\\s*([^;]+)`);return t?t.pop():""},F=()=>I(_),w=()=>I(T),v=()=>I(b),R=(...e)=>{t("[models/Analytics]",...e)};class H{constructor(){this._handleFetchSucceded=e=>{this.store.setState((t=>{const i={};i.path=e.path;i.referrerPath=e.referrerPath;i.referrer="";i.analyticsPageId=e.pageId;i.hsfp=e._getFingerprint();i.canonicalUrl=e.canonicalUrl;i.contentType=e.contentType;i.pageId=H.getPageId()||e.pageId;e.session&&(i.hssc=e.session.get());if(e.utk){i.hstc=e.utk.get();i.hutk=e.utk.visitor}return Object.assign({},t,i,{isLoaded:!0})}))};window._hsq=window._hsq||[];const e={isLoaded:!1,pageUrl:window.location.href,pageTitle:window.document.title,referrer:window.document.referrer,userAgent:window.navigator.userAgent,hutk:F(),hssc:v(),hstc:w(),pageId:H.getPageId()};this.store=new o(e);this.fetchAnalytics()}fetchAnalytics(){this._analyticsQueue.push(this._handleFetchSucceded)}subscribe(e){return this.store.subscribe(e)}get analytics(){return this.store.state}track(e){R("Tracking analytics",e);this._analyticsQueue.push(e)}get _analyticsQueue(){return window._hsq}static getPageId(){const e=window.hsVars;return e&&e.analytics_page_id?e.analytics_page_id:e&&e.page_id?e.page_id:null}static getLanguage(){const e=window.hsVars;return e&&e.language?e.language:null}}new H;function N(e){const t=t=>{"Escape"===t.key&&e()};document.addEventListener("keydown",t);return()=>{document.removeEventListener("keydown",t)}}const k=(...e)=>{t("[clipboardUtils]",...e)};function L(e){return new Promise(((t,i)=>{if(navigator.clipboard)navigator.clipboard.writeText(e).then((()=>{k("Text successfully copied to clipboard");t()})).catch((e=>{k("Error copying text to clipboard:",e);i(e)}));else{k("Not supported on browser");i(new Error("Clipboard API not available"))}}))}const O=e=>null===e,M=e=>void 0===e,P=e=>"object"==typeof e,x=e=>"string"==typeof e,D=e=>P(e)&&0===Object.keys(e).length,U=e=>x(e)&&0===e.trim().length,V=e=>O(e)||M(e)||U(e)||D(e);function q(e,t,i){return new Promise(((s,n)=>{let r=0;const o=()=>{try{const t=e();s(t)}catch(e){r++;r>=t?n(e):setTimeout(o,i)}};o()}))}const Y="interactive-close-button";function G(){return document.getElementById(Y)}function $(){try{return Array.from(document.querySelectorAll("a[href*='closeInteractive()'"))}catch(e){return[]}}class B{constructor({applicationController:e}){this.listenForCloseClick=()=>{const e=G();null==e||e.addEventListener("click",(()=>{this.applicationController.closeCTA()}));null==e||e.addEventListener("keypress",(e=>{"Enter"===e.key&&this.applicationController.closeCTA();"Space"===e.code&&this.applicationController.closeCTA()}));$().forEach((e=>{e.addEventListener("click",(()=>{this.applicationController.closeCTA()}))}))};this.applicationController=e;p(this.listenForCloseClick);p(this.addA11yAttributes)}addA11yAttributes(){const e=G();null==e||e.setAttribute("tabindex","0")}}function W(e,t){if(!e||!e.parentElement)return null;const i=document.createElement(t);Array.from(e.attributes).forEach((e=>{i.setAttribute(e.name,e.value)}));i.innerHTML=e.innerHTML;e.parentElement.replaceChild(i,e);return i}const z=(...e)=>{t("[ContainerVideoController",...e)};class j{constructor({applicationController:e}){this.updateHubspotPlayerContainerStyles=()=>{const e=document.querySelector(".hs-video-container"),t=document.querySelector(".hs-video-wrapper"),i=document.querySelector(".hs-video-wrapper iframe");if(!t||!i)return;this.videoFrame=i;this.videoWrapper=t;let s=Number(i.dataset.hsvHeight),n=Number(i.dataset.hsvWidth);const r=e.style.maxWidth;let o=this.determineMaxWidthContainer(t);if(r){const e=Number(r.replace("px",""));o=o?Math.min(o,e):e}n=n?Math.min(o,n):o;s=s||this.determineHeightFromWidth(n);e.style.margin="0";t.style.height="100%";t.style.paddingBottom="0px";i.style.position="static";n&&(i.style.width=`${n}px`);s&&(i.style.height=`${s}px`)};this.determineMaxWidthContainer=e=>{let t=e,i=0;for(;t&&!i;){t.clientWidth&&(i=t.clientWidth);t=t.parentElement}return i};this.determineHeightFromWidth=e=>{const t=this.videoWrapper.style.paddingBottom;if(t){return e*(Number(t.replace("%",""))/100)}return 0};this.updateOembedPlayerContainerStyles=()=>{const e=document.createElement("style"),t=document.querySelector(".oembed_container, .embed_container");if(!t)return;t.classList.add("with-alignment","hs-video-dimension-override");const i=t.querySelector(".iframe_wrapper"),s=i.querySelector("iframe");s&&(this.videoFrame=s);const n=Number(s.height)/Number(s.width);let r,o,a=this.determineMaxWidthContainer(t.parentElement);const l=a*n;if(t.classList.contains("oembed_container--full-size")){r=l;o=a}else{const e=i.dataset.maxHeight||i.dataset.height||s.height;r=e?Number(e):0;const l=i.dataset.maxWidth||i.dataset.width||s.width;o=l?Number(l):0;const c=t.style.maxWidth,h=t.style.maxHeight;if(c&&h){const e=Number(c.replace("px",""));a=a?Math.min(a,e):e;o=o?Math.min(a,Number(o)):a;r=o*n}o=o?Math.min(a,Number(o)):a}let c="";o&&(c=`width: ${o}px!important;`);r&&(c=`${c}height:${r}px!important;`);e.innerHTML=`\n      .oembed_custom-thumbnail {\n        ${c};\n        padding-bottom: 0px !important;\n        padding-top: 0px !important;\n      }\n      .hs-video-dimension-override .iframe_wrapper {\n        padding-bottom: 0px !important;\n        padding-top: 0px !important;\n        max-width: 100%!important;\n        ${c}\n      }\n      .hs-video-dimension-override iframe {\n        ${c}\n        padding-bottom: 0px !important;\n        padding-top: 0px !important;\n        max-width: 100%!important\n      }\n    `;document.head.appendChild(e)};this.handleClose=()=>{if(window.hsVideoApi&&"function"==typeof window.hsVideoApi.pauseAllPlayers)window.hsVideoApi.pauseAllPlayers();else if(this.videoFrame){const e=W(this.videoFrame,"div");this.videoFrame=e}};this.handleShowing=()=>{if(this.videoFrame&&"DIV"===this.videoFrame.tagName){const e=W(this.videoFrame,"iframe");this.videoFrame=e}};this.applicationController=e;this.listenForCloseEvent();this.listenForShowingEvent();p((()=>{if(this.needsStyleUpdate()){z("Using flex styling, so need to override relative styling for video");this.listenForVideoPlayer();this.updateOembedPlayerContainerStyles()}else z("No need to override relative styling for video");this.isHubspotVideo()||this.setOEmbedElements()}))}needsStyleUpdate(){const e=1e3;let t=0;const i=document.querySelector(".oembed_container, .embed_container, .hs-video-wrapper");if(!i)return!1;let s=i;for(;s&&t<e;){if(s.className.split(" ").some((e=>e.includes("-flexbox-positioning"))))return!0;s=s.parentElement;t++}return!1}listenForCloseEvent(){this.applicationController.registerHandler(e.HAS_CLOSED,this.handleClose)}listenForShowingEvent(){this.applicationController.registerHandler(e.SHOWING_CTA,this.handleShowing)}listenForVideoPlayer(){window._hsVideoReady=window._hsVideoReady||[];window._hsVideoReady.push(this.updateHubspotPlayerContainerStyles)}setOEmbedElements(){if(this.videoFrame)return;const e=document.querySelector(".oembed_container, .embed_container");if(!e)return;const t=e.querySelector(".iframe_wrapper").querySelector("iframe");t&&(this.videoFrame=t)}isHubspotVideo(){return Boolean(window.hsVideoApi)}}class X{constructor({applicationController:e}){this.handleClose=()=>{document.querySelectorAll("audio").forEach((e=>{e.pause()}))};this.applicationController=e;this.listenForCloseEvent()}listenForCloseEvent(){this.applicationController.registerHandler(e.HAS_CLOSED,this.handleClose)}}var Q="  @media (max-width: 767px) {\n    .row-depth-1 .row-fluid {\n      width: 100%;\n      flex-direction: column!important;\n    }\n\n    .row-depth-1 .row-fluid > .dnd-column {\n      width: 100%;\n      margin-left: 0;\n    }\n\n    .row-depth-1 .row-fluid > .dnd-column + .dnd-column {\n      margin-top: 10px!important;\n    }\n  }\n";const K=(...e)=>{t("[ContainerVideoController",...e)};class J{constructor({applicationController:t,handleResize:i}){this.handleSendStylesheets=()=>{const t={media:Q};K("Sending stylesheets",t);this.applicationController.sendMessage({type:e.SEND_STYLESHEETS,payload:{stylesheetsHtml:t}})};this.handleReceiveUpdatedStylesheets=e=>{K("Stylesheets updated",e);Object.keys(this.initialStylesheets).forEach((t=>{const i=document.querySelector(`style[data-hs-id="${t}"]`);i&&(i.innerHTML=e.stylesheets[t]||this.initialStylesheets[t])}));this.handleResize()};this.applicationController=t;this.initialStylesheets={media:""};this.createMediaQueryStyle();this.handleResize=i;this.listenForStylesheetUpdates()}init(){p(this.handleSendStylesheets)}listenForStylesheetUpdates(){this.applicationController.registerHandler(e.RECEIVE_FILTERED_STYLESHEETS,this.handleReceiveUpdatedStylesheets)}createMediaQueryStyle(){K("Adding media query stylesheet");const e=document.createElement("style");e.dataset.hsId="media";document.head.appendChild(e)}}class Z extends E{constructor({applicationController:e}){super({applicationController:e});this.applicationController=e;const t=window.location.search.indexOf("enableResponsiveStyles")>-1;this.stylesheetSyncer=new J({applicationController:this.applicationController,handleResize:this.handleResize});t&&this.stylesheetSyncer.init();this.listenForConfigs()}listenForConfigs(){this.applicationController.registerHandler(e.SEND_CTA_CONFIG,(e=>{e.containerStyles.useResponsiveStyling&&this.stylesheetSyncer.init();e.containerStyles.scaleHeightToFitContent||this.setBodyDimensions(e);this.hideScrollbar(e)}))}hideScrollbar(e){if(e.containerStyles.scaleHeightToFitContent||e.containerStyles.isSingleModuleOnly){const e=document.createElement("style");e.id="web-interactives-scroll-hide";e.innerHTML="body::-webkit-scrollbar{ display: none; }.body-wrapper::-webkit-scrollbar{ display: none; }";document.head.appendChild(e)}}setBodyDimensions(e){const t=e.containerStyles.height.value,i=e.containerStyles.width.value;if(window.frameElement){const e=getComputedStyle(window.frameElement);document.body.style.minHeight=`calc(${t}px - ${e.borderBottomWidth} - ${e.borderTopWidth})`;document.body.style.minWidth=`calc(${i}px - ${e.borderLeftWidth} - ${e.borderRightWidth})`}else{document.body.style.minHeight=`${t}px`;document.body.style.minWidth=`${i}px`}}}class ee{constructor({handleClose:e}){this.listenForClose=()=>{N(this.handleClose)};this.handleClose=e;this.listenForClose()}}const te=(...e)=>{t("[populateLinksWithTrackingParams]",...e)},ie=["currentUrl","referrer","canon","canonicalUrl","pageUrl","contentType","encryptedPayload","pageId","analyticsPageId","hutk","hstc","hssc","hsfp","utk","containerType","webInteractiveId","webInteractiveContentId","audienceId","campaignGuid","campaignId","userAgent","timeStarted","timeFinished","redirectUrl","skip","includeInitial","pageTitle","contentGroupId","portalId"],se=`https://${(new Date).getTime()}-dummy.com`,ne=(e,t)=>{let i,s=!1;try{i=new URL(e)}catch(t){te("[populateLinksWithTrackingParams]","Checking for relative URL",e);s=!0}if(s)try{i=new URL(`${se}${e.startsWith("/"),""}${e}`)}catch(t){te("Could not parse url for link",t);return e}Object.entries(t).forEach((([e,t])=>{ie.includes(e)?null!=t&&i.searchParams.set(e,String(t)):te("Invalid analytics parameter passed",e)}));const n=i.href;return s?n.replace(se,""):n};var re=(e,t=[...document.querySelectorAll(".hs-web-interactive a")])=>{t.length&&t.forEach((t=>{const i=t.getAttribute("href");i&&!i.startsWith("javascript")&&t.setAttribute("href",ne(i,e))}))};const oe="0-91";class ae{constructor({applicationController:t}){this.analyticsForForm={};this.listenForConfig=t=>{this.applicationController.registerHandler(e.SEND_CTA_CONFIG,(e=>{const{webInteractiveId:i,portalId:s}=e;t(Object.assign({},e,{callToActionId:this.getCallToActionId(i,s)}))}))};this.listenForAnalytics=t=>{this.applicationController.registerHandler(e.RECEIVED_ANALYTICS,(e=>t(this.extractAnalytics(e))))};this.handleFormReady=()=>{this.applicationController.fireContainerReady()};this.handleFormSubmit=({formId:t,redirectUrl:i,submissionValues:s})=>{this.applicationController.sendMessage({type:e.CTA_FORM_SUBMITTED,payload:{formId:t,submissionValues:s}});i&&this.applicationController.navigatePage(i)};this.applicationController=t}extractAnalytics(e){return["hutk","canonicalUrl","contentType","pageId","path","referrerPath","referrer","pageUrl","pageTitle","userAgent"].reduce(((t,i)=>e[i]&&!V(e[i])?Object.assign({},t,{[i]:e[i]}):t),{})}getCallToActionId(e,t){return`${t}-${oe}-${e}`}}const le=(...e)=>{t("[ContainerFormControllerV3",...e)},ce={ON_FORM_SUBMITTED:"onFormSubmitted",ON_FORM_SUBMIT:"onFormSubmit",ON_FORM_READY:"onFormReady"},he=5,de=200;class pe extends ae{constructor(e){super(e);this.callToActionId="";this.handleReceiveAnalytics=e=>{this.analyticsForForm=e};this.handleReceiveConfig=({pageUrl:e,pageTitle:t,pageId:i,callToActionId:s,hutk:n})=>{this.callToActionId=s;e&&!this.analyticsForForm.pageUrl&&(this.analyticsForForm.pageUrl=e);t&&!this.analyticsForForm.pageTitle&&(this.analyticsForForm.pageTitle=t);i&&!this.analyticsForForm.pageId&&(this.analyticsForForm.pageId=i);n&&!this.analyticsForForm.hutk&&(this.analyticsForForm.hutk=n)};this.handlePresubmit=()=>{this.setFormContext()};this.initializeFormInstance();this.listenForConfig(this.handleReceiveConfig)}initializeFormInstance(){q((()=>{const e=window.HubSpotForms.getForms();if(0===e.length)throw new Error("No forms available");this.formInstance=e[0]}),he,de).then((()=>{this.registerFormInstanceEvents();this.listenForAnalytics(this.handleReceiveAnalytics)})).catch((e=>{le("Failed to initialize form instance:",e)}))}registerFormInstanceEvents(){if(this.formInstance){this.formInstance.isFormReady?this.handleFormReady():this.formInstance.on(ce.ON_FORM_READY,this.handleFormReady);this.formInstance.on(ce.ON_FORM_SUBMITTED,((e,{redirectUrl:t,submissionValues:i})=>{this.handleFormSubmit({formId:this.getFormId(),redirectUrl:t,submissionValues:i})}));this.formInstance.on(ce.ON_FORM_SUBMIT,this.handlePresubmit)}}setFormContext(){const e=this.callToActionId;this.formInstance.setContext(Object.assign({},this.formInstance.getContext(),this.analyticsForForm,{extraSubmissionMetadata:{callToActionId:e},getExtraMetaDataBeforeSubmit:()=>({callToActionId:e}),__INTERNAL__CONTEXT:{disableRedirect:!0}}))}getFormId(){return this.formInstance?this.formInstance.id:""}}const ue={ON_FORM_READY:"hs-form-event:on-ready",ON_FORM_SUBMISSION_SUCCESS:"hs-form-event:on-submission:success"};class me extends ae{constructor(e){super(e);this.handleReceiveConfig=({pageUrl:e,pageTitle:t,pageId:i,callToActionId:s})=>{this.setExtraSubmissionMetadata(Object.assign({callToActionId:s},this.analyticsForForm.pageUrl?{}:{pageUrl:e},this.analyticsForForm.pageTitle?{}:{pageTitle:t},this.analyticsForForm.pageId?{}:{pageId:i}))};this.handleReceiveAnalytics=e=>{this.analyticsForForm=e;this.setExtraSubmissionMetadata(e)};this.listenForGlobalEvents();this.listenForConfig(this.handleReceiveConfig)}listenForGlobalEvents(){this.listenForFormReady();this.listenForFormSubmissionSuccess()}listenForFormReady(){document.addEventListener(ue.ON_FORM_READY,(()=>{this.handleFormReady();this.listenForAnalytics(this.handleReceiveAnalytics)}))}listenForFormSubmissionSuccess(){document.addEventListener(ue.ON_FORM_SUBMISSION_SUCCESS,(e=>{const{formId:t}=e.detail,i=window.HubspotFormsV4.getFormFromEvent(e);i.getFormFieldValues().then((e=>{this.handleFormSubmit({formId:t,redirectUrl:i.getRedirectUrl(),submissionValues:this.getSubmissionValues(e)})})).catch((()=>{}))}))}getSubmissionValues(e){return e.reduce(((e,{name:t,values:i})=>Object.assign(e,{[t]:0===i.length?"":1===i.length?i[0]:i})),{})}setExtraSubmissionMetadata(e){window.HubspotFormsV4&&window.HubspotFormsV4.getForms()[0].setExtraSubmissionMetadata(e)}}function ge(){return Boolean(window.HubSpotForms)}function Ce(){return Boolean(document.getElementsByClassName("hs-form-html")[0])}class ye extends A{constructor(){super({ContainerResizeControllerClass:Z});this.shouldPopulateLinks=!0;this.closeCTA=()=>{this.sendMessage({type:e.CLOSE_INTERACTIVE,payload:{}})};this.overrideBodyHeight=()=>{document.body.style.height="fit-content"};this.closeButtonController=new B({applicationController:this});p((()=>{this.setupForms();this.overrideBodyHeight()}));this.listenForConfigs();this.listenForAnalytics();this.keyPressController=new ee({handleClose:this.closeCTA});this.ContainerVideoController=new j({applicationController:this});this.containerAudioController=new X({applicationController:this})}triggerClickCTA(t){this.sendMessage({type:e.TRIGGER_CTA,payload:{triggerCTA:t}})}listenForConfigs(){this.registerHandler(e.SEND_CTA_CONFIG,(e=>{this.setGates(e.gates);e.shouldUseJsTracking?this.shouldPopulateLinks=!1:re({webInteractiveId:e.webInteractiveId,webInteractiveContentId:e.contentModelId,audienceId:e.audienceId,containerType:e.containerType,campaignId:e.campaignGuid,pageUrl:e.pageUrl,portalId:e.portalId},[...document.querySelectorAll("a")])}))}listenForAnalytics(){this.registerHandler(e.RECEIVED_ANALYTICS,(e=>{this.shouldPopulateLinks&&re(e)}))}setupForms(){Ce()?this.containerFormControllerV4=new me({applicationController:this}):ge()?this.containerFormControllerV3=new pe({applicationController:this}):this.fireContainerReady()}onLinkClick(e){e.dataset.ctaTrigger&&this.triggerClickCTA(parseInt(e.dataset.ctaTrigger,10));if(e.dataset.clickCopyValue)L(e.dataset.clickCopyValue);else if(e.parentNode&&e.parentNode.parentNode){const t=e.parentNode.parentNode;t&&t instanceof HTMLElement&&t.dataset.ctaTrigger&&this.triggerClickCTA(parseInt(t.dataset.ctaTrigger,10))}}}function Ee(){return new ye}Ee()}();