(window.ansFrontendRelayWebpackJsonpFunction=window.ansFrontendRelayWebpackJsonpFunction||[]).push([["component-NUXRenderer"],{SpgY:function(e,t,n){"use strict";n.r(t),n.d(t,"nuxTransition",(function(){return U}));var a=n("RIqP"),r=n.n(a),l=n("lwsE"),i=n.n(l),o=n("W8MJ"),u=n.n(o),s=n("7W2i"),c=n.n(s),d=n("a1gu"),p=n.n(d),f=n("Nsbk"),m=n.n(f),g=n("eP4p"),y=n("EFAP"),h=n("jQ0q"),b=n("SKAY"),v=n("8lmh"),k=n("VyO/"),x=n("AaDK"),w=n("nwxp"),S=n("GLuq"),R=n("mF64"),F=n("UyMh"),j=n("q1tI"),O=n.n(j),E=n("RqIh"),I=n("jufJ"),_=n("noLW"),M=n("6lcX"),K=n("RA+f"),C=n("d1zJ");function N(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var T,q=function(e){c()(n,e);var t=N(n);function n(e){var a;return i()(this,n),(a=t.call(this,e)).state={currentStepIdx:0},a}return u()(n,[{key:"incrementStepIdx",value:function(){this.setState((function(e){return Object.assign({},e,{currentStepIdx:e.currentStepIdx+1})}))}},{key:"render",value:function(){var e=this.props.totalSteps,t=this.state.currentStepIdx,n="".concat((this.state.currentStepIdx+1)/e*100,"%");return t<e&&O.a.createElement(K.i,{top:0,fullX:!0,zIndex:"modal_desktop",bg:"white",borderBottom:!0,boxShadow:"medium"},O.a.createElement(K.j,{width:M.d,mx:"auto",alignItems:"center",justifyContent:"space-between"},O.a.createElement(_.a,{color:"red",height:C.b}),O.a.createElement(K.n,{alignItems:"center"},O.a.createElement(K.e,null,O.a.createElement(K.s,{medium:!0},O.a.createElement(I.Translate,null,"Start"))),O.a.createElement(K.e,{px:"medium"},O.a.createElement(K.e,{bg:"gray",borderRadius:"pill",height:10,width:600},O.a.createElement(K.e,{bg:"blue",borderRadius:"pill",height:"100%",width:n,transition:"width",transitionDuration:"400ms"}))),O.a.createElement(K.e,null,O.a.createElement(K.s,{medium:!0},O.a.createElement(I.Translate,null,"Finish")))),O.a.createElement(K.e,{opacity:0},O.a.createElement(_.a,{color:"red",height:C.b}))))}}]),n}(j.Component),A=n("V1RE");function L(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var U=function(e){var t,n=e.flowData,a=e.showNextModal,r=e.dismissModalFlow;Object(x.a)("nux_step_completion",{step_name:n.stepNames[n.stepIdx]}),n.stepIdx+=1,null!==(t=n.headerRef)&&void 0!==t&&t.current&&n.headerRef.current.incrementStepIdx(),n.stepIdx>=n.stepNames.length?r():(n.isLastStep=n.stepIdx>=n.numInteractiveSteps-1,a({modalProps:{name:A.f[n.stepNames[n.stepIdx]],queryVariables:{stepType:n.stepNames[n.stepIdx]},desktopWidth:A.b,desktopHeight:A.a,desktopOverlayStyle:{backgroundColor:"white"}},replaceActiveModal:!0}))},D=function(e){c()(n,e);var t=L(n);function n(e){var a;return i()(this,n),(a=t.call(this,e)).headerRef=void 0,a.shouldIncludeSpinnerStep=function(e){return b.isStorybook||b.isNpmRunStart||[E.a.answer,E.a.home_feed_main].includes(e)},a.headerRef=O.a.createRef(),a}return u()(n,[{key:"render",value:function(){var e=this,t=this.props.nux;if(!t)return null;if(!Object(A.e)(t.steps))return null;var a=t.steps.length,l=t.id,i=t.__typename;return O.a.createElement(y.d.Consumer,null,(function(o){var u=!!o&&e.shouldIncludeSpinnerStep(o);return O.a.createElement(k.a,{mutation:n.mutations.nuxMarkComplete,variables:{},onCompleted:function(){var e=Object(b.getSetting)("pageOid");if(Object(w.g)())Object(g.h)();else if(o!==E.a.answer||e||(Object(v.logJsError)("NUXRenderer","Answer page doesn't have aid, given context:".concat(e," URL: ").concat(Object(R.b)().href)),Object(F.c)(Object(S.g)("/"))),o===E.a.answer&&Object(F.c)("/?signup_answer_page=".concat(e),"replace"),o===E.a.question_main){var t=Object(S.d)("/");t.query.from_signup=1,Object(F.c)(t)}},optimisticResponse:{nuxMarkComplete:{nux:{id:l,__typename:i,steps:[]},viewer:{showGoToFeedGrowl:!0}}}},(function(n){return O.a.createElement(O.a.Fragment,null,Object(w.b)()&&O.a.createElement(q,{totalSteps:a+1,ref:e.headerRef}),O.a.createElement(h.a,{shouldPrefetch:Object(w.g)(),modalFlowProps:{initialModalProps:(l=t.steps[0].name,{name:A.f[l],queryVariables:{stepType:l},desktopWidth:A.b,desktopHeight:A.a,desktopOverlayStyle:{backgroundColor:"white"}}),initialFlowData:{stepIdx:0,numInteractiveSteps:a,stepNames:[].concat(r()(t.steps.map((function(e){return e.name}))),r()(u?["spinner"]:[])),isLastStep:a<2,headerRef:e.headerRef,pageType:o},containerProps:{legacy:!0,easyDismissEnabled:!1},dismissableBack:!1,transitionName:"NUXTransition",postDismissCallback:n}},(function(e){var t=e.openModalFlow;return O.a.createElement(A.c,{openModalFlow:t})})));var l}))}))}}]),n}(O.a.Component);D.fragments={nux:void 0!==T?T:T=n("v5H7")},D.mutations={nuxMarkComplete:A.d},D.displayName="NUXRenderer";t["default"]=Object(k.b)(D)},V1RE:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return f})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return v}));var a,r=n("J4zp"),l=n.n(r),i=n("SKAY"),o=n("AaDK"),u=n("qy3/"),s=n("q1tI");function c(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,l=e},f:function(){try{i||null==n["return"]||n["return"]()}finally{if(o)throw l}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var p="760px",f="550px",m={follow_interests:"FollowInterestsStep",language:"LanguageStep",download_app:"DownloadAppStep",spinner:"SpinnerStep"},g=[["index","index"],["question","q"],["question","answer"],["topic","t"]],y=function(){return!!function(){var e,t=!1,n=c(g);try{for(n.s();!(e=n.n()).done;){var a=e.value,r=l()(a,2),o=r[0],u=r[1];o===Object(i.getSetting)("controller")&&u===Object(i.getSetting)("action")&&(t=!0)}}catch(s){n.e(s)}finally{n.f()}return t}()&&!Object(i.getSetting)("getParams").digest_story},h=function(e){return Object(u.c)(e)&&y()},b=function(e){var t=e.openModalFlow;return Object(s.useEffect)((function(){Object(o.a)("nux_start",{}),t()}),[t]),null},v=void 0!==a?a:a=n("jX9V")},jX9V:function(e,t,n){"use strict";n.r(t);var a=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},n={alias:null,args:null,concreteType:"NUX",kind:"LinkedField",name:"nux",plural:!1,selections:[e,t,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"steps",plural:!0,selections:[e,t],storageKey:null}],storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"showGoToFeedGrowl",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"nuxUtils_nuxMarkComplete_Mutation",selections:[{alias:null,args:null,concreteType:"NuxMarkComplete",kind:"LinkedField",name:"nuxMarkComplete",plural:!1,selections:[n,{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[a],storageKey:null}],storageKey:null}],type:"MutationRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"nuxUtils_nuxMarkComplete_Mutation",selections:[{alias:null,args:null,concreteType:"NuxMarkComplete",kind:"LinkedField",name:"nuxMarkComplete",plural:!1,selections:[n,{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[a,e],storageKey:null}],storageKey:null}]},params:{id:"a6d7246182f57758f28d7429944b38acadc5d748dd77a0e1ff1864508308a3fb",metadata:{},name:"nuxUtils_nuxMarkComplete_Mutation",operationKind:"mutation",text:null}}}();a.hash="224397605c2cc50bffba1864a365598f",t["default"]=a},v5H7:function(e,t,n){"use strict";n.r(t);var a=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"NUXRenderer_nux",selections:[e,t,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"steps",plural:!0,selections:[e,t,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],type:"NUX",abstractKey:null}}();a.hash="8c29d0d10ed3a46bd9362f6188158a5b",t["default"]=a}}]);