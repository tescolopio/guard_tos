import{q as t,c as a,_ as n,n as i,cg as e,t as s,J as o,s as l,ci as r,x as c,$ as h,d as p,f as d,ad as u,aq as m,ar as v,ch as k,e as C}from"./shell-9be24b40.js";import{S as x}from"./faceplate-switch-input-9b5940a8.js";import{i as f}from"./icon-info-fill-48c6b21a.js";import{I as b}from"./icon-translate-outline-bb1258db.js";import{d as g,e as w,f as M,g as T,h as A,i as $,j as y,k as D}from"./translation-dccd8f28.js";import"./checked-input-element-4ed4c77d.js";const E=t(l);let V=class extends E{constructor(){super(...arguments),this.isDesktop=!1,this.translationContextValue=r,this.translationActiveMsg="Translations enabled",this.handleTranslationActiveSwitch=()=>{const t=!this.translationContextValue.isTranslationActive;this.dispatchContextUpdateEvent({isTranslationActive:t})},this.closeTranslationCoachmark=()=>{this.translationCoachmark?.close?.(),setTimeout((()=>{this.dispatchContextUpdateEvent({shouldDisplayCoachmark:!1})}),500)},this.openTranslationCoachmark=()=>{this.trackEvent(g(!!this.translationContextValue.isTranslationActive)),this.translationCoachmark?.show?.()},this.openTranslationMenu=()=>{this.trackEvent(w(!!this.translationContextValue.isTranslationActive)),this.isDesktop?this.translationDropdownMenu?.show?.():this.translationMenuBottomSheet?.showModal?.()},this.handleCoachmarkSettingsClick=()=>{this.closeTranslationCoachmark(),this.openTranslationMenu(),this.trackEvent(M(T.UpdateSettings))},this.handleTranslationActiveClick=t=>{t.stopPropagation(),this.trackEvent(A(!!this.translationContextValue.isTranslationActive))},this.handleTooltipClick=t=>{t.stopPropagation()},this.handleCoachmarkCloseClick=()=>{this.closeTranslationCoachmark(),this.trackEvent(M(T.Dismiss))},this.handleNavMobileButtonClick=()=>{this.openTranslationMenu(),this.trackEvent($(!!this.translationContextValue.isTranslationActive))},this.handleNavbarButtonClick=()=>{this.trackEvent($(!!this.translationContextValue.isTranslationActive)),this.trackEvent(w(!!this.translationContextValue.isTranslationActive))},this.handleNavigationButtonClose=t=>{t.stopPropagation(),this.trackEvent(y(!!this.translationContextValue.isTranslationActive))}}connectedCallback(){super.connectedCallback();const{coachmarkDisplayCount:t,isTranslationActive:a,shouldDisplayCoachmark:n}=this.translationContextValue;this.trackEvent(D(!!a)),window.setTimeout((()=>{if(!n)return;const a=t<3;this.dispatchContextUpdateEvent({coachmarkDisplayCount:t+1,shouldDisplayCoachmark:a}),a&&this.openTranslationCoachmark()}),500)}dispatchContextUpdateEvent(t){const a={...this.translationContextValue,...t},n=new CustomEvent("update-translation-context",{bubbles:!0,composed:!0,detail:a});this.dispatchEvent(n)}renderCoachmark(){return this.translationContextValue.shouldDisplayCoachmark?c`<div class="flex flex-col">\n <div class="flex flex-row flex-nowrap items-start">\n <div class="flex-shrink flex-grow-0 pt-xs pl-xs mr-xs">\n ${f({size:h.Small})}\n </div>\n <div class="flex flex-col flex-grow flex-shrink-0 pt-xs items-start">\n <h3 class="mt-0 text-14">${this.translationActiveMsg}</h3>\n <p class="mt-0 max-w-[10rem] xs:max-w-none">\n ${this.translationContextValue.isTranslationActive?"Posts and comments are automatically translated":"Automatically translate posts and comments"}\n </p>\n </div>\n <div class="flex-shrink flex-grow-0">\n ${p({size:d.Medium,appearance:"plainInverted",shape:"pill",leadingIcon:u({size:h.Small}),attributes:{"aria-label":"Close",id:"coachmark-close-button",onclick:this.handleCoachmarkCloseClick}})}\n </div>\n </div>\n <div class="flex flex-nowrap gap-xs justify-end">\n ${p({children:"Settings",size:d.Medium,appearance:"plainInverted",shape:"pill",attributes:{id:"coachmark-settings-button",onclick:this.handleCoachmarkSettingsClick}})}\n </div>\n </div>`:c``}renderDesktopMenu(){return c`<faceplate-dropdown-menu \n position="bottom-end" \n id="translation-desktop-menu" \n .onclose="${this.handleNavigationButtonClose}" \n>\n ${p({size:d.Medium,appearance:"plain",shape:"pill",leadingIcon:b({size:h.Medium}),attributes:{id:"translation-menu-button","aria-label":this.translationActiveMsg,onclick:this.handleNavbarButtonClick}})}\n <faceplate-menu slot="menu" dropdown>\n ${m({label:c`\n <faceplate-switch-input \n id="hui-translation-switch" \n appearance="${x.PRIMARY}" \n class="inline-flex flex-row-reverse gap-sm" \n ?checked="${this.translationContextValue.isTranslationActive}" \n @input="${this.handleTranslationActiveSwitch}" \n @click="${this.handleTranslationActiveClick}" \n>\n ${this.translationActiveMsg}\n </faceplate-switch-input>\n `,size:v.Medium})}\n </faceplate-menu>\n </faceplate-dropdown-menu>`}renderMobileMenu(){return c`<div>\n ${p({size:d.Medium,appearance:"plain",shape:"pill",leadingIcon:b({size:h.Medium}),attributes:{id:"translation-menu-button",onclick:this.handleNavMobileButtonClick,"aria-label":this.translationActiveMsg}})}\n <faceplate-bottom-sheet \n id="translation-mobile-menu" \n @faceplate-close="${this.handleNavigationButtonClose}" \n>\n <div class="p-md flex flex-col items-stretch w-full">\n <faceplate-switch-input \n id="hui-translation-switch" \n appearance="${x.PRIMARY}" \n class="flex flex-row-reverse justify-between gap-sm px-xs" \n ?checked="${this.translationContextValue.isTranslationActive}" \n @input="${this.handleTranslationActiveSwitch}" \n @click="${this.handleTranslationActiveClick}" \n>\n <span class="inline-flex items-center gap-xs">\n ${b({size:h.Medium})}\n <span> ${this.translationActiveMsg} </span>\n </span>\n </faceplate-switch-input>\n </div>\n </faceplate-bottom-sheet>\n </div>`}render(){return c`<faceplate-tooltip \n position="${this.isDesktop?"bottom-end":"bottom"}" \n appearance="inverted" \n id="translation-coachmark-tooltip" \n trigger-event="none" \n @click="${this.handleTooltipClick}" \n>\n <div slot="trigger">\n ${this.isDesktop?this.renderDesktopMenu():this.renderMobileMenu()}\n </div>\n ${this.renderCoachmark()}\n </faceplate-tooltip>`}};V.styles=[a],n([i({type:Boolean,attribute:"is-desktop"})],V.prototype,"isDesktop",void 0),n([e({context:k,subscribe:!0}),s()],V.prototype,"translationContextValue",void 0),n([o("#translation-coachmark-tooltip")],V.prototype,"translationCoachmark",void 0),n([o("#translation-desktop-menu")],V.prototype,"translationDropdownMenu",void 0),n([o("#translation-mobile-menu")],V.prototype,"translationMenuBottomSheet",void 0),V=n([C("hui-translation-button")],V);
//# sourceMappingURL=hui-translation-button-client-js-c500a1f2.js.map
