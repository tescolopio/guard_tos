const GLOBAL_STRINGS={PLAY:"Play",PAUSE:"Pause",TOGGLE_FULL_SCREEN:"Toggle full screen",MUTE:"Mute",RESTART:"Restart",CAPTIONS:"Closed captions",REWIND:"Rewind",FORWARD:"Forward"};function InitPxVideo(a){function h(t){return y(t.split(" --\x3e ")[1])}function y(t){return null==t?0:(i=t.split(",")[0].split(":"),Math.floor(60*i[0]*60)+Math.floor(60*i[1])+Math.floor(i[2]));var i}function x(t){for(t.subcount=0;h(t.captions[t.subcount][0])<t.movie.currentTime.toFixed(1);)if(t.subcount++,t.subcount>t.captions.length-1){t.subcount=t.captions.length-1;break}}function C(t){t.captionsBtnContainer.className="px-video-captions-btn-container pull-left show",t.isCaptionDefault&&(t.captionsContainer.className="px-video-captions pull-left show",t.captionsBtn.setAttribute("checked","checked"))}function T(t){t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement||(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen).call(t)}function v(){var t=e.captionsContainer.className;document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement?(e.fullScreenBtn.checked=!0,e.container.setAttribute("style","width: 100%; height: 100%;"),e.controls.className="px-video-controls js-fullscreen-controls",e.captionsContainer.className=t+" js-fullscreen-captions",e.movie.setAttribute("width","100%"),e.movie.setAttribute("height","100%")):(e.fullScreenBtn.checked=!1,e.container.setAttribute("style","width:"+e.movieWidth+"px"),e.controls.className="px-video-controls",e.captionsContainer.className=t.replace("js-fullscreen-captions",""),e.movie.setAttribute("width",e.movieWidth),e.movie.setAttribute("height",e.movieHeight))}function E(){(document.exitFullscreen||document.msExitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen).call(document)}var t;function N(t){var n=document.getElementById("px-video-aria-announce");n&&(n.innerHTML="<p>"+t+"</p>")}(t=document.createElement("div")).id="px-video-aria-announce",t.setAttribute("role","alert"),t.setAttribute("aria-atomic","true"),t.style.overflow="hidden",t.style.textIndent="-999999px",document.body.appendChild(t);var e={};if(e.arBrowserInfo=function M(){navigator;var d,o,g,n=navigator.userAgent,i=navigator.appName,s=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10);return-1!==navigator.appVersion.indexOf("Windows NT")&&-1!==navigator.appVersion.indexOf("rv:11")?(i="IE",s="11;"):-1!==(o=n.indexOf("MSIE"))?(i="IE",s=n.substring(o+5)):-1!==(o=n.indexOf("Chrome"))?(i="Chrome",s=n.substring(o+7)):-1!==(o=n.indexOf("Safari"))?(i="Safari",s=n.substring(o+7),-1!==(o=n.indexOf("Version"))&&(s=n.substring(o+8))):-1!==(o=n.indexOf("Firefox"))?(i="Firefox",s=n.substring(o+8)):(d=n.lastIndexOf(" ")+1)<(o=n.lastIndexOf("/"))&&(i=n.substring(d,o),s=n.substring(o+1),i.toLowerCase()==i.toUpperCase()&&(i=navigator.appName)),-1!==(g=s.indexOf(";"))&&(s=s.substring(0,g)),-1!==(g=s.indexOf(" "))&&(s=s.substring(0,g)),r=parseInt(""+s,10),isNaN(r)&&(s=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10)),[i,r]}(),e.browserName=e.arBrowserInfo[0],e.browserMajorVersion=e.arBrowserInfo[1],"IE"===e.browserName&&(8===e.browserMajorVersion||9===e.browserMajorVersion)||(e.isSmartphoneOrTablet=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),e.isSmartphoneOrTablet))return!1;typeof a.debug>"u"&&(a.debug=!1),e.debug=a.debug,a.debug&&console.log(e.browserName+" "+e.browserMajorVersion),e.playAriaLabel=typeof a.videoTitle>"u"||""===a.videoTitle?"Play":"Play video, "+a.videoTitle,e.container=document.getElementById(a.videoId),e.movie=e.container.getElementsByTagName("video")[0],e.controls=e.container.getElementsByClassName("px-video-controls")[0],e.movie.removeAttribute("controls"),e.randomNum=Math.floor(1e4*Math.random()),a.debug&&console.log("Inserting custom video controls"),e.controls.innerHTML='<div class="clearfix"><div class="pull-left"><button class="px-video-restart" title="'+GLOBAL_STRINGS.RESTART+'"><span class="sr-only">'+GLOBAL_STRINGS.RESTART+'</span></button><button class="px-video-rewind" title="'+GLOBAL_STRINGS.REWIND+'"><span class="sr-only">rewind <span class="px-seconds">10</span> seconds</span></button><button class="px-video-play" aria-label="'+e.playAriaLabel+'" title="'+GLOBAL_STRINGS.PLAY+'"><span class="sr-only">'+GLOBAL_STRINGS.PLAY+'</span></button><button class="px-video-pause hide" title="'+GLOBAL_STRINGS.PAUSE+'"><span class="sr-only">'+GLOBAL_STRINGS.PAUSE+'</span></button><button class="px-video-forward" title="'+GLOBAL_STRINGS.FORWARD+'""><span class="sr-only">forward <span class="px-seconds">10</span> seconds</span></button></div><div class="px-video-mute-btn-container pull-left" title="'+GLOBAL_STRINGS.MUTE+'"><input class="px-video-mute sr-only" id="btnMute'+e.randomNum+'" type="checkbox" /><label id="labelMute'+e.randomNum+'" for="btnMute'+e.randomNum+'"><span class="sr-only">'+GLOBAL_STRINGS.MUTE+'</span></label></div><div class="pull-left"><label for="volume'+e.randomNum+'" class="sr-only">Volume:</label><input id="volume'+e.randomNum+'" class="px-video-volume" type="range" min="0" max="10" value="5" /></div><div class="px-video-captions-btn-container pull-left hide" title="'+GLOBAL_STRINGS.CAPTIONS+'"><input class="px-video-btnCaptions sr-only" id="btnCaptions'+e.randomNum+'" type="checkbox" /><label for="btnCaptions'+e.randomNum+'"><span class="sr-only">'+GLOBAL_STRINGS.CAPTIONS+'</span></label></div><div class="px-video-fullscreen-btn-container pull-left show" title="'+GLOBAL_STRINGS.TOGGLE_FULL_SCREEN+'"><input class="px-video-btnFullScreen sr-only" id="btnFullscreen'+e.randomNum+'" type="checkbox" /><label for="btnFullscreen'+e.randomNum+'"><span class="sr-only">'+GLOBAL_STRINGS.TOGGLE_FULL_SCREEN+'</span></label></div><div class="px-video-time"><span class="sr-only">time</span> <span class="px-video-duration">00:00</span></div></div><div><div class="px-timetip hide"></div><progress class="px-video-progress" max="100" value="0"><span>0</span>% played</progress></div>',e.movieWidth=e.movie.width,e.movieWidth<360&&(e.movieWidth=360),e.container.setAttribute("style","width:"+e.movieWidth+"px"),e.movieHeight=e.movie.height,e.labelMute=document.getElementById("labelMute"+e.randomNum),e.labelMuteOffset=e.movieWidth-390,"Firefox"===e.browserName&&(e.labelMuteOffset=e.labelMuteOffset-10),e.labelMuteOffset<0&&(e.labelMuteOffset=0),e.labelMute.setAttribute("style","margin-left:"+e.labelMuteOffset+"px");for(var p="",b=e.movie.childNodes,m=0;m<b.length;m++)"track"===b[m].nodeName.toLowerCase()&&"captions"===b[m].getAttribute("kind")&&(p=b[m].getAttribute("src"));if(e.captionExists=!0,""===p?(e.captionExists=!1,a.debug&&console.log("No caption track found.")):a.debug&&console.log("Caption track found; URI: "+p),typeof a.captionsOnDefault>"u"&&(a.captionsOnDefault=!0),e.isCaptionDefault=a.captionsOnDefault,typeof a.seekInterval>"u"&&(a.seekInterval=10),e.seekInterval=a.seekInterval,e.btnPlay=e.container.getElementsByClassName("px-video-play")[0],e.btnPause=e.container.getElementsByClassName("px-video-pause")[0],e.btnRestart=e.container.getElementsByClassName("px-video-restart")[0],e.btnRewind=e.container.getElementsByClassName("px-video-rewind")[0],e.btnForward=e.container.getElementsByClassName("px-video-forward")[0],e.btnVolume=e.container.getElementsByClassName("px-video-volume")[0],e.btnMute=e.container.getElementsByClassName("px-video-mute")[0],e.progressBar=e.container.getElementsByClassName("px-video-progress")[0],e.progressBarSpan=e.progressBar.getElementsByTagName("span")[0],e.captionsContainer=e.container.getElementsByClassName("px-video-captions")[0],e.captionsBtn=e.container.getElementsByClassName("px-video-btnCaptions")[0],e.captionsBtnContainer=e.container.getElementsByClassName("px-video-captions-btn-container")[0],e.duration=e.container.getElementsByClassName("px-video-duration")[0],e.txtSeconds=e.container.getElementsByClassName("px-seconds"),e.fullScreenBtn=e.container.getElementsByClassName("px-video-btnFullScreen")[0],e.fullScreenBtnContainer=e.container.getElementsByClassName("px-video-fullscreen-btn-container")[0],e.progressBarHoverContainer=e.container.getElementsByClassName("px-timetip")[0],e.txtSeconds[0].innerHTML=e.seekInterval,e.txtSeconds[1].innerHTML=e.seekInterval,e.isTextTracks=!1,e.movie.textTracks&&(e.isTextTracks=!0),e.btnPlay.addEventListener("click",function(){e.movie.play(),e.btnPlay.className="px-video-play hide",e.btnPause.className="px-video-pause px-video-show-inline",e.btnPause.focus()},!1),e.btnPause.addEventListener("click",function(){e.movie.pause(),e.btnPlay.className="px-video-play px-video-show-inline",e.btnPause.className="px-video-pause hide",e.btnPlay.focus()},!1),e.btnRestart.addEventListener("click",function(){e.movie.currentTime=0,e.isTextTracks||(e.subcount=0),e.movie.play(),e.btnPlay.className="px-video-play hide",e.btnPause.className="px-video-pause px-video-show-inline"},!1),e.btnRewind.addEventListener("click",function(){var t=e.movie.currentTime-e.seekInterval;e.movie.currentTime=t<0?0:t,e.isTextTracks||x(e),N("rewind to "+(Math.round(t)>0?Math.round(t):0)+" seconds")},!1),e.btnForward.addEventListener("click",function(){var t=e.movie.currentTime+e.seekInterval;e.movie.currentTime=t>e.movie.duration?e.movie.duration:t,e.isTextTracks||x(e),N("forward to "+Math.round(t)+" seconds")},!1),e.btnVolume.addEventListener("change",function(){e.movie.volume=parseFloat(this.value/10)},!1),e.btnMute.addEventListener("click",function(){e.movie.muted=!0!==e.movie.muted},!1),e.btnMute.onkeypress=function(t){13==t.keyCode&&(t.preventDefault(),this.checked=1!=this.checked,e.movie.muted=!0!==e.movie.muted)},e.movie.addEventListener("timeupdate",function(){e.secs=parseInt(e.movie.currentTime%60),e.mins=parseInt(e.movie.currentTime/60%60),e.secs=("0"+e.secs).slice(-2),e.mins=("0"+e.mins).slice(-2),e.duration.innerHTML=e.mins+":"+e.secs},!1),e.movie.addEventListener("timeupdate",function(){e.percent=100/e.movie.duration*e.movie.currentTime,e.percent>0&&(e.progressBar.value=e.percent,e.progressBarSpan.innerHTML=e.percent)},!1),e.progressBar.addEventListener("click",function(t){e.pos=(t.pageX-this.getBoundingClientRect().left)/this.offsetWidth,e.movie.currentTime=e.pos*e.movie.duration,e.isTextTracks||x(e)}),e.progressBar.addEventListener("mousemove",function(t){e.pos=(t.pageX-this.getBoundingClientRect().left)/this.offsetWidth;var i=function k(t){var n=0,i=0,s=0,r="";if(t>0){var d=new Date(1e3*t);n=d.getUTCHours(),i=d.getUTCMinutes(),s=d.getSeconds()}return 0!=n&&(r+=n<10?"0"+n+":":n+":"),(r+=i<10?"0"+i+":":i+":")+(s<10?"0"+s:s)}(e.pos*e.movie.duration);e.progressBarHoverContainer.innerHTML=i,e.progressBarHoverContainer.style.position="absolute",e.progressBarHoverContainer.style.left=t.pageX-this.getBoundingClientRect().left-25+"px",e.progressBarHoverContainer.classList.remove("hide")}),e.progressBar.addEventListener("mouseout",function(t){e.progressBarHoverContainer.classList.add("hide")}),e.fullScreenBtn.addEventListener("click",function(){this.checked?T(e.container):E()},!1),e.fullScreenBtn.onkeypress=function(t){13==t.keyCode&&(t.preventDefault(),1==this.checked?(this.checked=!1,E()):(this.checked=!0,T(e.container)))},e.movie.addEventListener("ended",function(){e.captionsContainer.innerHTML=""}),e.captionsBtn.addEventListener("click",function(){e.captionsContainer.className=this.checked?"px-video-captions show":"px-video-captions hide",(document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement)&&(e.captionsContainer.className=e.captionsContainer.className+" js-fullscreen-captions")},!1),e.captionsBtn.onkeypress=function(t){13==t.keyCode&&(t.preventDefault(),this.checked=1!=this.checked,e.captionsContainer.className=this.checked?"px-video-captions show":"px-video-captions hide")},e.captionExists){if("IE"===e.browserName&&10===e.browserMajorVersion||"IE"===e.browserName&&11===e.browserMajorVersion||"Firefox"===e.browserName&&e.browserMajorVersion>=31||"Chrome"===e.browserName&&43===e.browserMajorVersion||"Safari"===e.browserName&&e.browserMajorVersion>=7){a.debug&&console.log("Detected browser unable to play HTML5 captions; using custom captions"),e.isTextTracks=!1;for(var c={},f=e.movie.textTracks,u=0;u<f.length;u++)(c=e.movie.textTracks[u]).mode="hidden"}if(e.isTextTracks)for(a.debug&&console.log("textTracks supported"),C(e),c={},f=e.movie.textTracks,u=0;u<f.length;u++)(c=e.movie.textTracks[u]).mode="hidden","captions"===c.kind&&c.addEventListener("cuechange",function(){this.activeCues[0]&&(this.activeCues[0].hasOwnProperty("text")||""!==this.activeCues[0].text)&&(e.captionsContainer.innerHTML=this.activeCues[0].text)},!1);else if(a.debug&&console.log("textTracks not supported so rendering captions 'manually'"),C(e),e.currentCaption="",e.subcount=0,e.captions=[],e.movie.addEventListener("timeupdate",function(){e.movie.currentTime.toFixed(1)>function B(t){return y(t.split(" --\x3e ")[0])}(e.captions[e.subcount][0])&&e.movie.currentTime.toFixed(1)<h(e.captions[e.subcount][0])&&(e.currentCaption=e.captions[e.subcount][1]),e.movie.currentTime.toFixed(1)>h(e.captions[e.subcount][0])&&e.subcount<e.captions.length-1&&e.subcount++,e.captionsContainer.innerHTML=e.currentCaption},!1),""!=p){var l;window.XMLHttpRequest?l=new XMLHttpRequest:window.ActiveXObject&&(l=new ActiveXObject("Microsoft.XMLHTTP")),l.onreadystatechange=function(){if(4===l.readyState)if(200===l.status){var t,n;a.debug&&console.log("xhr = 200"),e.captions=[],t=l.responseText.split(/\r?\n\r?\n/);for(var s=0;s<t.length;s++)n=t[s],e.captions[s]=[],e.captions[s]=n.split(/\r\n?|\n/);e.captions.shift(),a.debug&&console.log("Successfully loaded the caption file via ajax.")}else a.debug&&console.log("There was a problem loading the caption file via ajax.")},l.open("get",p,!0),l.send()}"Safari"===e.browserName&&7===e.browserMajorVersion&&(console.log("Safari 7 detected; removing track from DOM"),f=e.movie.getElementsByTagName("track"),e.movie.removeChild(f[0]))}else e.captionsContainer.className="px-video-captions hide";document.addEventListener("fullscreenchange",function(){v()},!1),document.addEventListener("mozfullscreenchange",function(){v()},!1),document.addEventListener("webkitfullscreenchange",function(){v()},!1),document.addEventListener("MSFullscreenChange",function(){v()},!1)}