<!--
  Side panel layout for the Terms Guardian extension.
  Provides a condensed summary, key excerpts, and uncommon terms analysis
  for the active document.
-->

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Terms Guardian Analysis</title>
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <article class="sidepanel" id="sidepanel-content" aria-label="Terms Guardian analysis">
      <header>
        <h1>Terms Guardian</h1>
        <h2>Know Your Terms, Know Your Rights</h2>
        <!-- 2025-10-17: Loading spinner -->
        <div class="loading-spinner" id="loading-spinner" hidden>
          <div class="spinner"></div>
          <span class="loading-text">Analyzing document...</span>
        </div>
        <div class="document-meta">
          <span id="service-name">Loading...</span>
          <a id="terms-url" href="#" target="_blank" rel="noopener">--</a>
        </div>
        <div class="grade-display">
          <p class="grade-value" id="document-grade" role="text">-</p>
          <p class="grade-caption">Document Grade</p>
        </div>
      </header>

      <main>
        <section aria-labelledby="summary-heading">
          <div class="summary-header">
            <h2 id="summary-heading">Summary</h2>
          </div>
          <div class="summary-toggle-group" role="group">
            <button type="button" id="summary-document-btn" class="summary-toggle-btn active">
              Whole Document
            </button>
            <button type="button" id="summary-section-btn" class="summary-toggle-btn">
              By Section
            </button>
          </div>
          <p id="summary-view-label" class="summary-view-label">Document Summary</p>

          <div class="summary-view" id="summary-overall">
            <div class="metric-grid" role="list">
              <div class="metric-card" role="listitem">
                <span class="metric-label">Rights Score</span>
                <span class="metric-value" id="rights-score">--</span>
                <span class="chip">Confidence: <span id="confidence">--</span></span>
              </div>
              <div class="metric-card" role="listitem">
                <span class="metric-label">Readability</span>
                <span class="metric-value" id="readability-score">--</span>
                <span class="chip">Hover for breakdown</span>
              </div>
            </div>
            <div class="flags" role="list" id="flags-container">
              <!-- Populated dynamically -->
            </div>
            
            <!-- 2025-10-17: URI Category Breakdown -->
            <details class="uri-breakdown" id="uri-breakdown">
              <summary class="uri-breakdown-toggle">
                <span class="toggle-text">View Rights Category Breakdown</span>
                <span class="toggle-icon">â–¼</span>
              </summary>
              <div class="uri-categories" id="uri-categories-container">
                <!-- Populated dynamically with 8 categories -->
              </div>
            </details>
            
            <div class="summary-card" id="summary-text">
              Loading analysis...
            </div>
          </div>

          <div class="summary-view" id="summary-sections" hidden>
            <div id="sections-accordion"></div>
          </div>
        </section>

        <section aria-labelledby="terms-heading">
          <h2 id="terms-heading">Uncommon Legal Terms</h2>
          <div id="uncommon-terms-container">
            <!-- Populated dynamically -->
          </div>
        </section>
      </main>

      <footer>
        Analysis by Terms Guardian
      </footer>
    </article>

    <!-- Sidepanel controller (includes constants and debugger via webpack bundle) -->
    <script src="sidepanel.js"></script>
  </body>
</html>
